(()=>{var U=Object.create,A=Object.defineProperty,z=Object.getOwnPropertyDescriptor,W=Object.getOwnPropertyNames,J=Object.getPrototypeOf,q=Object.prototype.hasOwnProperty,Z=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),X=(t,e,s,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of W(e))!q.call(t,o)&&o!==s&&A(t,o,{get:()=>e[o],enumerable:!(i=z(e,o))||i.enumerable});return t},Y=(t,e,s)=>(s=t!=null?U(J(t)):{},X(e||!t||!t.__esModule?A(s,"default",{value:t,enumerable:!0}):s,t)),Q=Z(t=>{function e(){return e=Object.assign?Object.assign.bind():function(i){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},e.apply(this,arguments)}var s=function i(o,n){if(o===n)return!0;if(o&&n&&typeof o=="object"&&typeof n=="object"){if(o.constructor!==n.constructor)return!1;var r,l,h;if(Array.isArray(o)){if((r=o.length)!=n.length)return!1;for(l=r;l--!=0;)if(!i(o[l],n[l]))return!1;return!0}if(o.constructor===RegExp)return o.source===n.source&&o.flags===n.flags;if(o.valueOf!==Object.prototype.valueOf)return o.valueOf()===n.valueOf();if(o.toString!==Object.prototype.toString)return o.toString()===n.toString();if((r=(h=Object.keys(o)).length)!==Object.keys(n).length)return!1;for(l=r;l--!=0;)if(!Object.prototype.hasOwnProperty.call(n,h[l]))return!1;for(l=r;l--!=0;){var c=h[l];if(!i(o[c],n[c]))return!1}return!0}return o!=o&&n!=n};t.superstate=function(i){var o=i,n=void 0,r=[],l=[],h=[],c=e({},{draft:function(){return n},sketch:function(a,f){var g,u=n,m=$((g=n)!=null?g:o,a);return s(u,m)||(p({eventType:"before:sketch"}),n=m,p({eventType:"after:sketch"}),f!=null&&f.silent||x()),c},publish:function(a){if(n===void 0)return c;var f=n;return s(o,f)||(p({eventType:"before:publish"}),y(f),p({eventType:"after:publish"}),d(),a!=null&&a.silent||C()),c},discard:d},{set:function(a,f){if(a===void 0&&n===void 0)return c;var g=o,u=$(o,a);return s(g,u)||(p({eventType:"before:set"}),y(u),p({eventType:"after:set"}),f!=null&&f.silent||C()),c},now:function(){return o},subscribe:function(a,f){if(f==="draft")return function(u){var m=l.length;return l.push(u),function(){return l=[].concat(l.slice(0,m),l.slice(m+1,l.length))}}(a);var g=r.length;return r.push(a),function(){return r=[].concat(r.slice(0,g),r.slice(g+1,r.length))}},extend:function(a){return e({},c,function(f){return Object.keys(f).reduce(function(g,u){var m;return e({},g,((m={})[u]=function(){var M=f[u].apply(f,[K()].concat([].slice.call(arguments)));if(M!==void 0)return M},m))},{})}(a))},use:function(a){return p({eventType:"init"},a),h=[].concat(h,a),c},unsubscribeAll:function(){r=[],l=[]}});function d(a){return n===void 0||(p({eventType:"before:discard"}),n=void 0,p({eventType:"after:discard"}),a!=null&&a.silent||x()),c}function y(a){p({eventType:"before:change"}),o=a,p({eventType:"after:change"})}function $(a,f){var g=function(u){if(u!==void 0)return u instanceof Map?new Map(u):u instanceof Set?new Set(u):JSON.parse(JSON.stringify(u))}(a);return function(u){return typeof u=="function"}(f)?f(g):f}function p(a,f){var g=a.eventType,u=f||h;u.length&&u.forEach(function(m){m(e({eventType:g},c))})}function K(){return c}function C(){p({eventType:"before:broadcast:now"}),r.forEach(function(a){return a(o)}),p({eventType:"after:broadcast:now"})}function x(){p({eventType:"before:broadcast:draft"}),l.forEach(function(a){return a(n)}),p({eventType:"after:broadcast:draft"})}return c}});async function tt(){console.log(`DEVEXE ${this.st.CF} [${this.FM.os}/${this.FM.D.length}]`);let t=200,e=0;this.os=0;let s=[];for(console.log(`\u{1F7E2}\u{1F7E2}\u{1F7E2} .EXE START : ${this.FM.os}/${this.FM.D.length} ${this.st.halt}`),this.st.halt&&console.log("\u{1F53A} we are halted, so we need to resume");!this.st.halt&&this.FM.os<this.FM.D.length&&e<t;){let i=this.FM.dst();if(i.t===85){if(i.c===254){i.e1?this.stOpSet(i.o,"substyle",i.e1,i):(this.stOpSet(i.o,null,"style",i),console.log(`STYLE set for ${i.o}`));continue}i={...this.stOpGet(i.o,"style")||{},...i}}i.id=EE.id(),i.pc=this.FM.pc(),i.xpe=this.id,this.st.CF.pc=this.FM.pc(),this.st.CF.os=this.FM.os,console.log(`\u{1F539} ${i.t} ${i.o} ${i.c}`),console.log({KEXE:this.st.K});let o=EE.fn.get(i.o);if(!o){console.log("\u2B07\uFE0F dyanmic get render fn for",i.o);let n=FLCC.getRenderFn(i.o,0);console.log(FLCC.renderFn);let r=document.createElement("script");if(r.type="text/javascript",r.innerHTML=FLCC.renderFn,document.head.appendChild(r),o=EE.fn.get(i.o),!o){this.terr(`\u26A0\uFE0F CRITICAL ERROR here? no fn for ${i.o}`);return}}if(i.err){this.terr(i.t1);continue}if(this.st.havevv)this.st.havevv=!1;else{if(this.st.lang!==0&&this.st.app.lang!==this.st.lang){this.st.lang=0;continue}let n=await o.bind(this)(i);this.st.lastop=i.o,this.st.CF.lastvto=i.vto,this.st.lastel=i.o}e++}e==t&&console.log("\u{1F17E}\uFE0F\u{1F17E}\uFE0F\u{1F17E}\uFE0F\u{1F17E}\uFE0F\u{1F17E}\uFE0F HIT LOOP LIMIT!"),console.log("\u{1F534}\u{1F534}\u{1F534} .EXE STOP"),console.log({Kendexe:this.st.K})}var S="dev";function et(t,e=0){console.log(t),this.elog.push({level:e,ts:Date.now(),text:t})}function st(t){console.log(`\u{1F6BC} seeking mark ${t}....`);let e={};for(;this.FM.os<this.FM.D.length;){if(e=this.FM.dst(),e.o===1653244559&&(this.st.CF.MD[e.t1]=this.FM.os,console.log(`\u24C2\uFE0F mark ${e.t1}...`)),e.o===1653244559&&e.t1===t)return!0;console.log(e.o)}return console.log(`not !!! found ${t}....`),console.log({st:e}),!1}var b="0.6.4.1713",T=Y(Q(),1);function it(){console.log("decoding flow...");let t=this.u8(),e=this.u32(),s=this.toP(this.pl8()),i=this.pl32();return console.log(`flowcode: ${e} len: ${i.length}`),{t:17,c:t,fc:e,...s,bin:i}}function ot(){let t=this.u8(),e=this.u32v2();return console.log({c:t,thisop:e}),{t:51,c:t,o:e}}function nt(){let t=this.u8(),e=this.u32v2(),s=this.u32();return{t:35,c:t,fc:s,o:e}}function rt(){let t=this.u8(),e=this.u32v2(),s=this.u32(),i=this.toP(this.pl8());return{t:36,c:t,fc:s,o:e,...i}}function lt(){let t=this.u8(),e=this.u32v2(),s=this.u32(),i=this.u32();return{t:37,c:t,o:e,o2:s,o3:i}}function ht(){let t=this.u8(),e=this.u32v2(),s=this.u32(),i=this.pl32();return{c:t,o:e,o2:s,pl:i}}function ct(){let t=this.u8(),e=this.u32v2(),s=this.toP(this.pl8());return{c:t,o:e,...s}}function at(){let t=this.u8(),e=this.u8(),s=this.u8(),i=this.u32v2(),o=this.toP(this.pl8());return console.log({thisopfn:1,c:t,vti:e,vto:s,o:i,pl:o}),{t:68,c:t,o:i,vti:e,vto:s,...o}}function ut(){let t=this.u8(),e=this.u8(),s=this.u8(),i=this.u32(),o=this.toP(this.pl16());return{t:85,c:t,o:i,vti:e,vto:s,...o}}function ft(){let t=this.u8(),e=this.u8(),s=this.u8(),i=this.u32(),o=this.u32(),n=this.toP(this.pl16());return{t:85,c:t,o:i,fc:o,vti:e,vto:s,...n}}function dt(){let t=this.u8(),e=this.u32v2(),s=this.toP(this.pl16());return{c:t,o:e,...s}}function pt(){let t=this.u8(),e=this.u32v2(),s=this.pl16();return{c:t,o:e,pl:s}}function gt(){let t=this.u8(),e=this.u32v2(),s=this.pl32();return{c:t,o:e,pl:s}}function mt(){let t=this.u8(),e=this.u32v2(),s=this.toP(this.pl8()),i=this.pl32();return{c:t,o:e,...s,pl:i}}function vt(){let t=this.u16(),e=this.toS(this.pl16());return{line:t,msg:e}}function F(){return{v:this.toS(this.pl16())}}function Et(){console.log("--------------------hdr_s8:1");let t=this.u8(),e=this.toS(this.pl16());return{code:t,pl:e}}function yt(){let t=this.u8(),e=this.u32();return{code:t,v:e}}function Ft(){console.log("decode checksum!");let t=this.D.slice(this.os,this.os+32);return this.os+=32,{chksum:t}}var I=class{constructor(){this.ver=b,this.D=null,this.os=0,this.dfn=new Map([[17,it],[34,ot],[35,nt],[36,rt],[37,lt],[38,ht],[51,ct],[68,at],[85,ut],[86,ft],[102,dt],[119,pt],[136,gt],[153,mt],[187,vt],[218,F],[219,F],[220,F],[221,Et],[222,F],[238,yt],[100,Ft]]),this.flc=new Map([[17,[]],[34,[]],[51,[]],[68,[]],[85,[]],[100,[]],[221,[]],[238,[]]]),this.af="flcheader",this.dec={steps:[],hdr:[],ff:[],h:"",m:"",j:"",b64:"",fl:new Map,chksum:"",errors:[]}}pc(){return`${this.af}:${this.os}`}db64(t){let e=Uint8Array.from(atob(t),s=>s.charCodeAt(0));this.dflc(e)}dflc(t){for(this.os=0,this.bin=t,this.D=t;this.os<t.length;){console.log("\u{1F7E7} decode pass");let e=this.u8();console.log("\u{1F7E7}\u{1F7E7} ");let s=this.dfn.get(e);if(!s)throw console.log(`bad type ${e}`),new Error(`corrupt: unknown type ${e}`);let i={t:e,_s:this.os-1,...s.bind(this)()};switch(i._e=this.os,console.log("\u{1F7E7}\u{1F7E7} \u{1F7E7}"),i.t){case 17:this.dec.fl.set(i.fc,i);break;case 34:case 51:case 68:case 85:case 221:case 238:case 136:switch(i.code){case 2:this.dec.uid=i.pl;case 3:this.dec.aid=i.v;case 5:this.dec.an=i.pl;case 6:this.dec.pl=i.v;case 85:this.dec.sf=i.pl}this.dec.hdr.push(i);break;case 187:this.dec.errors.push(i);break;case 218:this.dec.h=i.v;break;case 219:this.dec.m=i.v;break;case 220:this.dec.b64=i.v;break;case 222:this.dec.j=i.v;break;case 100:this.dec.chksum=i.chksum;break;default:console.log(`\u{1F534} unrecognized type ${i.t}`)}}console.log("\u{1F7E2} decode complete")}gf(t){let e=this.dec.fl.get(t);if(!e)throw new Error(`flow ${t} not found`);return this.af=t,e.bin}dfl(t){this.D=t,this.os=0;let e=[];for(;this.os<this.D.length;){let s=this.dst();s.pc=this.pc(),e.push(s)}return e}daf(){Object.keys(this.dec.fl).forEach(t=>{let e=this.gf(t);this.dec.fl[t].st=this.dfl(e)})}dst(){let t=this.u8(),e=this.dfn.get(t);if(!e)throw"flc corrupt";return e.bind(this)()}nstep(){return this.os>this.eofl?{EOF:!0}:this.dst()}u8(){let t=this.D[this.os];return this.os++,t}u16(){let t=this.D[this.os]*256+this.D[this.os+1];return this.os+=2,t}u16v2(){let t=this.D[this.os]+this.D[this.os+1]*256;return this.os+=2,t}u32(){let t=this.D[this.os]+this.D[this.os+1]*256+this.D[this.os+2]*256*256+this.D[this.os+3]*256*256*256;return this.os+=4,t}u32v2(){let t=this.D[this.os]*256*256*256+this.D[this.os+1]*256*256+this.D[this.os+2]*256+this.D[this.os+3];return this.os+=4,t}pl8(){let t=this.u8(),e=this.D.slice(this.os,this.os+t);return this.os+=t,e}pl16(){let t=this.u16v2(),e=this.D.slice(this.os,this.os+t);return this.os+=t,e}pl32(){let t=this.u32(),e=this.D.slice(this.os,this.os+t);return this.os+=t,e}toS(t){return new TextDecoder("utf-8").decode(t)}toP(t){let e={},s=this.toS(t).split(";~");for(let i of s)if(i!==""){let[o,n]=i.split("|");n?Number(n)?e[o]=Number(n):e[o]=n:e[o]=!0}return e}toPfromS(t){let e={},s=t.split(";~");for(let i of s){let[o,n]=i.split("|");n?Number(n)?e[o]=Number(n):e[o]=n:e[o]=!0}return e}};async function bt(t){if(!window?.EPI?.engageaccount?.sb)return!1;let{error:e,data:s}=await EPI.engageaccount.sb.auth.getSession();return!(e||!s?.session?.access_token)}function wt(t){if(t=="true")return[!0,49];if(t=="yes")return[!0,49];if(t=="no")return[!1,49];if(t=="false")return[!1,49];if(t=="null")return[null,0];if(Number(t))return[Number(t),33];try{console.log("value",t);let e=JSON.parse(t);return typeof e=="object"?Array.isArray(e)?[e,this.getTy(e)]:[e,65]:[e,17]}catch{return[t,17]}}var k={160:"xpe"};async function $t(t){console.log(`\u{1F539} .execute() ${t.op}/${t.cmd} ${t.pl?t.pl.slice(0,30):""}`);let e=this.ops.get(t.op);if(!e)if(k[t.op]){this.p(`extended cmd ${t.op}...`);let s=await Ct.bind(this)(k[t.op]);this.ops.set(t.op,s.default),e=this.ops.get(t.op)}else this.terr(`unknown op ${t.op}`);if(t.op===168)return this._d=!0;await e.bind(this)(t),this._d=!1}async function Ct(t){let e=await import(`../../extend/distribution/op/${t}.mjs`);return console.log(e),e}async function xt(t){let e=0,s=100,i=0;for(;e<t.length&&i<s;){let o=this.FM.decodeStatement(t,e);this.cfg.debug&&console.log(`\u{1F7E2} ${e} ${i} ${o.op}`),await this.execute(o),e+=o.len,i++}}function Mt(t=" ",e){switch(typeof e){case"string":return t[0]==="+"?18:t[0]==="#"?24:t[0]==="$"?19:17;case"number":return 33;case"boolean":return 49;case"object":if(Array.isArray(e)){if(e.length===0)return 81;let s=typeof e[0];switch(s){case"string":return 82;case"number":return 83;case"boolean":return 84;case"object":return Array.isArray(s)?87:85}}else return t[0]==="*"?68:65;default:return 0}}var St={json:"application/json; charset=UTF-8",binary:"application/octet-stream",text:"text/plain",html:"text/html"};async function Tt(t,e={}){try{let{headers:s={},body:i,type:o="json",method:n="get",content:r="json",mode:l="cors"}=e,h={"Content-Type":St[r],...s};return r=="json"&&(i=JSON.stringify(i)),await(await fetch(t,{method:n,headers:h,body:i,mode:l}))[o]()}catch(s){console.log(s),this.perr(s.message),this.terr(`fetch error: ${s.message}`)}}function It(){this.st.CF=this.st.K.pop()}function kt(){this.st.K.push({...this.st.CF})}function Vt({FL:t,PC:e,END:s,LL:i,LC:o}){t&&(this.st.FL=t),this.st.PC=e||0,this.st.END=s||0,this.st.LL=i||0,this.st.LC=o||0}function Lt(t,e){let s=e;for(;s<this.st.CF.END;){let i=this.FM.decodeStatement(this.FM.FLC,s);if(i.op===t)return{offset:e,stmt:i,next:s+i.len};s+=i.len}return{error:"not found"}}function At(t){return typeof t!="string"?!1:!isNaN(t)&&!isNaN(parseFloat(t))}function Ot(t){if(this.pdb("register plugin "+t.name),console.log({pluginObj:t}),t.ops)for(op in t.ops)console.log({op}),this.ops.set(Number(op),t.ops[op])}function _t(t){switch(typeof t){case"string":return 17;case"number":return 33;case"boolean":return 49;case"object":if(Array.isArray(t)){if(t.length===0)return 81;let e=typeof t[0];switch(e){case"string":return 82;case"number":return 83;case"boolean":return 84;case"object":return Array.isArray(e)?55:54}}else return 65;default:return 0}}function Dt(t){let e=document.createElement("div");e.innerHTML=t.html,e.style.display="flex",e.style.justifyContent="center",e.id=t.id,this.st.lastid=t.id,t.expand&&(e.style.flexGrow=1);let s=document.getElementById(this.st.targetsec);return s?(console.log({domtgt:this.domptr,ts:this.st.targetsec}),this.st.colid?(console.log(`\u2705\u2705 OUT: COL ID is ${this.st.colid}`),s=document.getElementById(this.st.colid)):this.st.rowid&&(console.log(`\u{1F17E}\uFE0F\u{1F17E}\uFE0F OUT: ROW ID is ${this.st.rowid}`),s=document.getElementById(this.st.rowid)),s.appendChild(e),e.id):this.terr(`target section ${this.st.targetsec} not found!`)}function Nt(t){let e={eeh:!1,event:`xpe|${t.xpe}`};return e.text=t.t1?this.vmIv(t.t1):t.F1?t.F1:"Button",t.F1&&(e.eeh=!0,e.event+=`;~goto|${t.F1.toLowerCase()}`),t.value&&(e.eeh=!0,e.event+=`;~vn|${this.st.var[0]||"result"};~vv|${t.value}`),e}function jt(t){let e={event:`xpe|${t.xpe}`};return e.text=t.t1?this.vmIv(t.t1):"Input here",e.event+=`;~vn|${this.st.var[0]||"result"};~vto|${t.vto}`,e}function Pt(t,e){if(t.value=e,t.t1&&(t.t1=this.vmIv(t.t1)),t.V1){let s=this.vmGv(t.V1);s&&(t.value=s)}return t}function Rt(t){if(!t.f1)return"";let e=this.vmIv(t.f1);return e?(console.log({fontname:e}),EE.pim.aFo(e),`font-family:${EE.ff(e)};`):this.opError(t,`Font name ${t.f1} not found`)}var Bt=/^ex(ample)*\.(face|image|placeholder)([0-9]+)x*([0-9]*)$/;function Ht(t){let e=Bt.exec(t);if(e){let[,,i,o,n]=e;switch(i){case"face":return`https://f000.backblazeb2.com/file/xpestatic/faces/${o}.jpg`;case"image":return`https://picsum.photos/${o}/${n}`;case"placeholder":return`https://placeimg.com/${o}/${n}/any`}}return this.stOpGet(3209692633,t)||"https://www.w3schools.com/howto/img_avatar.png"}function Gt(t){let e=this.vmIv(t);if(this.st.ic[e])return this.st.ic[e];let[s,i]=e.split(".");return i||(i=this.stOpGet(2786201083,"set")||"mdi"),`${i}:${s}`}function Kt(t){let e=t.split(".");return console.log({p:e}),e.length===2?[e[0].toLowerCase(),e[1]]:[e[0].toLowerCase(),e[0]]}async function Ut(t,e={}){let{key:s,dev:i,version:o}=e,n={1:"account",2:"editor",5:"sounds",7:"dataquery",8:"liveupdate",9:"qrcode",10:"typewriter"};if(EE.EPI[t])return console.log(`module ${t} already loaded`),0;let r=n[t];if(!r)throw new Error(`unknown module ${t}`);let l=i?`https://engagedev/${r}/distribution/use.${r}.js`:`https://xpec.run/plugins/${r}/${r}.js`,h;try{let c=await import(l);console.log({R:c}),EE.EPI[t]=c.default}catch(c){return console.log({e:c}),-1}switch(t){case 1:EE.EA=new EE.EPI[1];break;case 2:break;case 5:EE.snd=new EE.EPI[5];break;case 6:if(!s)throw new Error("stripe key missing");EE.stripe=new EE.EPI[6](s),await EE.stripe.initialize();break;case 7:break;case 8:break;case 9:EE.qrcode=new EE.EPI[9];break;case 10:EE.TW=new EE.EPI[10];break;default:throw new Error(`unknown module ${r}`)}return 0}async function zt(t,e={}){let{local:s,latest:i}=e;if(window.EPI&&window.EPI[t])return 0;let o=s?`https://engagedev/plugins/${t}/distribution/${t}.js`:`https://xpec.run/plugins/${t}.js`;(i||this.st.latest)&&(o+="?latest");try{let n=await import(o)}catch(n){return console.log({e:n}),this.opErr(`plugin ${t} failed to load`),-1}return 0}function Wt(t){console.log("\u27A1\uFE0F INPUT"),console.log({ev:t}),t.clear&&(console.log("clear!"),document.getElementById(t.clear).value=""),this.st.clicksound&&this.playSnd();let e;if(t.sel){let s=this.vmGv(t.sel.base);if(!Array.isArray(s))return this.opErr({o:".input"},"sel must be a group type");e=s[t.sel.i],console.log("\u{1F9D1}\u{1F3FC}\u200D\u{1F3A4} chosen value is:"),console.log(e)}else e=t.value,e=this.vmIv(e),console.log("\u{1F9D1}\u{1F3FC}\u200D\u{1F3A4} input value is:",e);if(e){let s=t.vto?t.vto:this.getTy(e);console.log({t:s}),this.st.val=[[e,s]],t.vn&&this.vmSetType(t.vn,t.vto,e),this.vmAss()}this.st.wait&&(this.st.wait=!1,this.st.halt=!1,this.exe()),t.resume&&(this.st.halt=!1,this.exe()),t.goto&&this.goto(t.goto)}function Jt(t){let e={};return t.split(",").forEach(s=>{let[i,o]=s.split(":"),n=i.trim(),r=o.trim();r[0]==='"'&&(r=r.slice(1,-1)),e[n]=isNaN(r)?r:Number(r)}),e}function qt(t,e,s=1){this.operrs.set(t.o,{op:t.o,code:s,text:e}),this.lastoperr=t.o;let i=this.operrs.get(this.lastoperr),o=this.stOpGet(767292915,"action"),n=t.c1||"#292929",r=`
  .e1397578733 {
      width: 100%;
      border-radius:5px;
      background-color:#eeeeee;
      color: #292929;
      padding:10px;
      margin: 2px 50px 2px 50px;
      display:flex;
      align-items:center;
      justify-content:space-between;
  }
  .e1397578733-emsg {
      margin-left:20px;
      font-size: 10px;
      flex-grow:1;
      text-align:left;
  }
  `;EE.rec(t,r);function l(h){return`<div class="e1397578733">
    <div><svg fill="${n}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" width="16" height="16"><path d="M4.855.708c.5-.896 1.79-.896 2.29 0l4.675 8.351a1.312 1.312 0 0 1-1.146 1.954H1.33A1.313 1.313 0 0 1 .183 9.058ZM7 7V3H5v4Zm-1 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"></path></svg></div>
    <div class="e1397578733-emsg">${h}</div></div>`}switch(o){case 2:t.html=l(`Err ${this.lastoperr} : ${s} - ${e}`),this.out(t);return;case 3:this.vmSet("error",{op:t.o,code:s,text:e});return;case 4:console.log("ERROR IGNORED - USE CAREFULLY! ");return;case 1:default:t.html=l(`HALT: Err ${this.lastoperr} : ${i.code} - ${i.text}</div>`),this.out(t),this.st.halt=!0;return}}function Zt(t,e,s){return t[e]?t[e]:t.V1?this.isType(t.V1,s)?this.VM[t.V1].v:(this.opErr(t,"invalid variable input type"),null):(this.opErr(t,"cannot resolve variable"),null)}async function Xt(t){if(!EPI.engageaccount)return{sberror:"engageaccount/sb not initialized"};let{error:e,data:s}=await EPI.engageaccount.sb.auth.getSession();return e?{sberror:e.message}:{access_token:s?.session?.access_token,user_id:s?.session?.user?.id,email:s?.session?.user?.email,stripeid:s?.session?.user?.app_metadata?.stripeid,plan:s?.session?.user?.app_metadata?.pl||1,su:s?.session?.user?.app_metadata?.su}}async function Yt(t,e,s){let i={"xpe-op-auth":t,"xpe-client-id":"clientidhere"};s&&(i.Authorization=`Bearer ${s}`);try{let o=await(await fetch(`https://o${t}.deno.dev`,{method:"POST",headers:i,body:JSON.stringify(e)})).json();return o.success?{result:o}:{error:o.error,result:o}}catch(o){return{error:o.message}}}async function Qt(t="clicksound"){console.log(`playSnd ${t}`),EPI.sound.playSound(this.st[t])}async function te(t,e=2677007441){if(this.uiLo("mobile",{o:2317780205}),this.domptr=document.getElementById(`i${this.id}_s0_1970145754`),this.FM.dflc(t),await this.runinit(),!this.FM.dec.fl.get(e)){console.log(`\u{1F534} no flow ${e} found`);return}await this.goto(e)}function ee(){return{bundles:{},K:[],bs:[2677007441],CF:{fc:null,pc:null,END:0,LC:0,LL:0,MD:{},IF:{}},op:{},vref:[],var:[],val:[],lang:0,app:{locale:"en-US",lang:0,langname:"english"},au:{},int:{},cc:{},ic:{},img:{},targetsec:`i${this.id}_s0_1970145754`,SCR:0,SEC:1970145754,prod:!1,mode:1,dt:null}}function se(){console.log("clear instance ui");let t=document.getElementById(`i${this.id}`);t||console.log(`instance div not found: i${this.id}`),t.innerHTML=this.curLo}function ie(t){this.VM[t]||this.vmSet(t,!1),this.VM[t].v=!this.VM[t].v,console.log(`toggle ${t}`)}function oe(t){let e={xpe:this.id,html:`Cannot Resolve ${t}`};return this.out(e),-1}async function ne(t,e){e&&this.vmSet("value",e),console.log("\u{1F383} run block once start"),this.st.K.push({...this.st.CF,bin:this.FM.D,_WHILERES:this.VM._WHILERES,_IFRES:this.VM._IFRES,_ELSEIFRES:this.VM._ELSEIFRES}),this.st.CF.os=0,this.FM.os=0,this.FM.D=t.pl,await this.exe(),console.log("END OF FIRST RUN"),this.st.CF=this.st.K.pop(),this.VM._IFRES=this.st._IFRES,this.VM._ELSEIFRES=this.st._ELSEIFRES,this.FM.D=this.st.CF.bin,this.FM.os=this.st.CF.os,console.log("\u{1F383} run block once end")}async function re(t){for(console.log("\u{1F383}\u{1F383} run block loop start"),this.st.K.push({...this.st.CF,bin:this.FM.D,_WHILERES:this.VM._WHILERES,_IFRES:this.VM._IFRES,_ELSEIFRES:this.VM._ELSEIFRES}),this.st.CF.ll=this.st.ll,this.st.CF.lc=this.st.lc,this.st.CF.lt=this.st.lt,this.st.CF.lv=this.st.lv,this.st.CF.idx=this.st.idx?this.st.idx:"index",this.st.CF.os=0,this.FM.os=0,this.FM.D=t.pl;this.st.CF.lc<=this.st.CF.ll;)console.log(`\u{1F95D}\u{1F9C0}\u{1F9C0}\u{1F9C0}\u{1F9C0}\u{1F9C0}\u{1F9C0}\u{1F9C0}\u{1F9C0}\u{1F9C0}\u{1F9C0}\u{1F9C0} START loop iteration ${this.st.CF.lc} `),this.st.CF.lv?this.vmSet(this.st.CF.idx,this.st.CF.lv[this.st.CF.lc-1]):this.vmSet(this.st.CF.idx,this.st.CF.lc),await this.exe(),this.st.CF.lc++,this.st.CF.os=0,this.FM.os=0,console.log(`\u{1F345}\u{1F9C0}\u{1F9C0}\u{1F9C0}\u{1F9C0}\u{1F9C0}\u{1F9C0}\u{1F9C0}\u{1F9C0}\u{1F9C0}\u{1F9C0}\u{1F9C0} END loop iteration ${this.st.CF.lc} `);console.log("\u{1F383}\u{1F383} end of loop run"),this.st.CF=this.st.K.pop(),this.st.ll=this.st.CF.ll,this.st.lc=this.st.CF.lc,this.st.lv=this.st.CF.lv,this.st.lt=this.st.CF.lt,this.st.idx=this.st.CF.idx,this.VM._IFRES=this.st._IFRES,this.VM._ELSEIFRES=this.st._ELSEIFRES,this.VM._WHILE=this.st._WHILEIFRES,this.FM.D=this.st.CF.bin,this.FM.os=this.st.CF.os,console.log("\u{1F383}\u{1F383} loop end")}function le(){if(console.log("vmAss!"),console.log(this.st.var),console.log(this.st.val),this.st.havevv)return;let[t="result",e="error",s]=this.st.var,i=[t,e,s];console.log(this.st.val);for(let o=0;o<this.st.val.length;o++){let[n,r]=this.st.val[o],l=i[o];this.CELLRE.test(l)&&(l="data."+l),this.st.not&&r===49&&(console.log("NOT inversion"),n=!n,this.st.not=!1),this.vmSetType(l,r,n)}}async function he(t,e){console.log("paste image here..."),console.log({name:t,bin:e})}async function ce(t){console.log("upload image here...")}var ae=/^([0-9]+)-words$/,V=/{([\._:\*a-zA-Z0-9-]+)(!?)}/,ue="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",fe={"error.code":()=>464,"error.text":()=>"goggoogog"};function de(t){let e=ae.exec(t);if(e){console.log({EXAMPLE:!0,R:e});let[,o]=e;return ue.split(" ").slice(0,Number(o)).join(" ")}let s=t,i=V.exec(s);for(;i!==null;){let o=i[1],n=i[0],r=fe[o];if(r)s=s.replace(n,r.bind(this)());else{console.log({vn:o});let l=this.vmGvt(o);l&&l.value?type===49?s=s.replace(n,"YES!"):s=s.replace(n,value):s=i[2]?s="":s.replace(n,"")}i=V.exec(s)}return s}async function pe(){for(let t in this.FM.DATA){console.log(`\u2705 loadinf ${t}`);let{type:e,content:s}=this.FM.DATA[t];this.p(`n:${t} t:${e}`);let i;switch(e){case 2:try{i=JSON.parse(s),Array.isArray(i)?this.vmSetType(t,5,i):this.vmSetType(t,4,i);break}catch{this.terr("error parse JSON frag");break}case 3:i=[];let o=s.split(`
`),n=o[0].trim().split(",");for(let r=1;r<o.length;r++){let l=o[r].trim();if(l==="")continue;let h=l.split(","),c={};n.forEach((d,y)=>c[d]=h[y]),i.push(c)}this.vmSetType(t,5,i);break;case 4:console.log({fr:t,content:s,setting:!0}),this.vmSetType(t,1,s);break;case 10:i=[],s.split(`
`).forEach(r=>{let l=r.trim();l!==""&&i.push(l)}),this.vmSetType(t,5,i);break;default:this.vmSetType(t,1,s);break}}}function ge(t,e){let s=this.vmParseVn(t);if(console.log("parseVn",s),!s)return null;let{cell:i,base:o,index:n,field:r}=s;if(i)return this.VM.data?this.VM.data.v[i]:null;if(!this.VM[o])return null;if(!r&&!n){let l=this.VM[o].v;return e&&typeof l=="object"?JSON.stringify(l):l}if(r)return this.isI(o)?(console.log("field check",r),this.VM[o].v[r]):(console.log("\u{1F53A}\u{1F53A}\u{1F53A}\u{1F53A}\u{1F53A}\u{1F53A}\u{1F53A}\u{1F53A}\u{1F53A}\u{1F53A}\u{1F53A}\u{1F53A}\u{1F53A}\u{1F53A}\u{1F53A}"),console.log(this.VM.index),this.opErr({o:64},`getValue: variable ${o} is not an object`));if(n)return this.isG(o)?this.VM[o].v[n-1]:this.opErr({o:64},`getValue: variable ${o} is not a group`)}function me(t){let e=this.vmParseVn(t);if(console.log("parseVn",e),!e)return null;let{cell:s,base:i,index:o,field:n}=e;if(s)return this.VM.data?this.VM.data.v[s]:null;if(!this.VM[i])return null;if(!n&&!o)return{value:this.VM[i].v,type:this.VM[i].t};if(n){if(!this.isI(i))return this.opErr({o:64},`getValue: variable ${i} is not an object`);let r=this.VM[i].v[n],l=this.getTy(r);return{value:r,type:l}}if(o){if(!this.isG(i))return this.opErr({o:64},`getValue: variable ${i} is not a group`);let r=this.VM[i].v[o-1],l=this.getTy(v);return{value:r,type:l}}}function ve(t){if(t.vti===255&&this.st.lastop!==1806066166){this.st.var=["result"];return}this.st.havevv&&(this.st.havevv=!1);let[e="result"]=this.st.var;if(!t.vti||t.vti===255)return this.VM[e];let s=this.VM[e];return s?this.typeCheck(s.t,t.vti)?s:(this.opErr(t,`invalid input type to fnop ${t.o}: expecting ${t.vti} got ${s.t}`),null):null}function Ee(t,e,s){let i,o=e;s?i=s:t.vto!==0?i=t.vto:i=this.getTy(e),console.log(o,i),this.st.val=[[o,i]],this.vmAss()}async function ye(t){let e=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-1",e),i=btoa(String.fromCharCode(...new Uint8Array(s)));return Array.from(new Uint8Array(s)).map(o=>o.toString(16).padStart(2,"0")).join("")}function Fe(t){let e={html:`<div>${this.vmIv(t)}</div>`};this.out(e)}function be(t,e){switch(t){case"mobile":console.log("\u{1F4FA} mobile screen layout!"),console.log({MSL:1,s:e,TH:this});let s=`
  .e${e.o}-screen {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
  }

  .e${e.o}-top,
  .e${e.o}-bottom {
    width: 100%;   
  }

  .e${e.o}-header,
  .e${e.o}-footer {
    width: 100%;
    display: flex;
    background-color: black;
    color: white;
    justify-content: space-between;
    align-items: center;
  }

  .e${e.o}-main {
    flex-grow: 1;
    width: 100%;
    overflow-y: scroll;
    overflow-x: hidden;
  }
  `;EE.rec(e,s);let i=document.getElementById(`i${this.id}`);console.log({s:e,instance:i}),this.curLo=`
      <div id="i${this.id}_s0" class="e${e.o}-screen">
      <div id="i${this.id}_s0_3407041447" class="e${e.o}-header"></div>
      <div id="i${this.id}_s0_4254961657" class="e${e.o}-top"></div>
      <div id="i${this.id}_s0_1970145754" class="e${e.o}-main"></div>
      <div id="i${this.id}_s0_171242398" class="e${e.o}-bottom"></div>
      <div id="i${this.id}_s0_2706198880" class="e${e.o}-footer"></div>
    </div>
      `,i.innerHTML=this.curLo,console.log({donewithlayout:1,instance:i,html:i.innerHTML})}}async function we(t,e){try{t===1490612073?t=this.st.bs.pop()||2677007441:t===2677007441?this.st.bs=[2677007441]:this.st.bs.push(this.st.CF.fc);let s=this.FM.dec.fl.get(t),i=s?.ti;if(e){let n=e.toString().split(",");console.log("GOTO: we have args");let r=s?.a;if(!r)return this.opErr(`goto: no args found for flow ${t} but args were passed in!`);let l=r.split(",");console.log({inargs:n,flowargs:l});for(let h=0;h<l.length;h++){let c=l[h].slice(1,-1),d=n[h];d&&(console.log({aname:c,invarg:d}),d[0]==='"'&&(d=d.slice(1,-1)),d=d[0]==="{"?this.vmGv(d):d,console.log(`setting ${c} to ${d}`),this.vmSet(c,d))}}let o=this.FM.gf(t);this.st.halt=!1,this.st.CF.lastfc=this.st.CF.fc,this.FM.os=0,this.FM.D=o,this.st.CF.fc=t,this.st.CF.os=0,this.st.navsound&&(await this.usePI("sound",{latest:!0}),EPI.sound.playSound(this.st.navsound)),this.st.noclear||this.uicl(1970145754),this.st.noclear=!1,i&&this.sfHdr(i),await this.exe()}catch(s){this.opErr({o:"goto"},s.message)}}async function $e(t){this.instUiClear(),!!this.FM.dec.fl.get(3641309897)&&(t===!0||!this.st.initRan)&&(await this.goto(3641309897),this.st.initRan=!0)}async function Ce(){this.uiLo("mobile",{o:2317780205}),this.domptr=document.getElementById(`i${this.id}_s0_1970145754`),await this.runinit(),!this.st.startRan&&(!this.FM.dec.fl.get(2677007441)||await this.goto(2677007441))}var xe=/([-_a-zA-Z0-9]+)(.([a-z0-9]+))*/,L=36,O="";for(;L--;)O+=L.toString(36);var _=class{static version(){return`engage core ${b}/${S}`}constructor(t={}){this.PII={},this.opres=new Map,this.env=S,this.exe=tt,this.log=et,this.sfHdr=Fe,this.uiLo=be,this.paIt=Jt,this.fnGetArg=Zt,this.vlo=new Map([[1970145754,[]]]),this.sm=st,this.use=Ut,this.usePI=zt,this.input=Wt,this.sbctx=Xt,this.eali=bt,this.ddexe=Yt,this.playSnd=Qt,this.vmAss=le,this.vnToggle=ie;let{id:e="xpe",headless:s,ap:i,devmode:o=!0}=t;this.goto=we,this.runinit=$e,this.start=Ce,this.boot=te,this.devmode=o,this.ap=i||"testuserid/demoappid",this.SS=T.superstate,this.imPa=he,this.imUp=ce,this.rbonce=ne,this.rbloop=re,this.count=(0,T.superstate)(0),this.out=Dt,this.dbut=Nt,this.dinp=jt,this.de=Pt,this.errCnr=oe,this.rit=Ht,this.rict=Gt,this.rft=Kt,this.rfo=Rt,this.initSt=ee,this.instUiClear=se,this.hdl=s,this.id=e,this.coreid=this.uid(4),this.terr=(n,r="error")=>{this.log("throwing error",n),this.log(`\u{1F534}\u{1F534}\u{1F534}\u{1F534}\u{1F534}\u{1F534}\u{1F534} ${n}`)},this.lastoperr=0,this.opErr=qt,this.operrs=new Map,this.fe=Tt,this.n={},this.jsfn={},this.FLCManager=I,this.FM=new I,this.version=`${b}/${this.env}`,this.CELLRE=/^([A-Z]+)([0-9]+)$/,this.swTh=n=>window.EE.pim.swTh(n,`https://xpec.run/css/${n}.css`),this.coV=wt,this.evalTy=Mt,this.execute=$t,this.executeBlock=xt,this.isNum=At,this.kpush=kt,this.kpop=It,this.setCF=Vt,this.seek=Lt,this.sha1=ye,this.vmGv=ge,this.vmGvt=me,this.vmIv=de,this.fnPre=ve,this.fnPost=Ee,this.addPl=Ot,this.getTy=_t,this.vmVFrFr=pe,this.VM={},this.st=this.initSt(),this.elog=[],this.cfg={cdn:"xpec.run",imagecdn:"xpeimg.us"},this.log(`vm ${this.id}/${this.coreid} init (${this.version})`)}log(t){console.log(t)}opResult(t,e){this.opres.set(t.o,e)}nIncr=t=>{this.n[t]=this.n[t]?this.n[t]+1:1};decpl(t){let e=t.split(";~"),s={xpe:this.id,sec:this.st.ACTSEC};return e.forEach(i=>{let[o,n]=i.split("|");s[o]=n}),s}s2b(){let t=document.getElementById(`${this.id}_1`).lastChild;console.log(`\u2193 s2b ${t.id}`),t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}fnGetTarg(t){return t.t1?t.t1:t.V1&&this.isT(t.V1)?this.VM[t.V1].v:null}fnGetNarg(t){return t.n1?Number(t.n1):t.V1&&this.isN(t.V1)?this.VM[t.V1].v:null}fnGetUarg(t){return t.u1?t.u1:t.V1&&this.isN(t.V1)?this.VM[t.V1].v:null}fnGetDTarg(t){let e=t.da1?new Date(t.da1):new Date;return t.ti1&&(e=this.dtTime(e,t.ti1)),e}dtTime(t,e){let[s,i]=e.split(":");return t.setHours(s),t.setMinutes(i),console.log({xxx:1,d:t}),t}dtNow(){let t=new Date;if(!this.st.dt)return t;let e=this.st.dt.da?new Date(this.st.dt.da):t;return this.st.dt.ti&&(e=this.dtTime(e,this.st.dt.ti)),e}pushBs(t){this.st.K.includes(t)||(this.st.K=[...this.st.K,t])}popBs(){return this.st.K.length===1?this.st.K[0]:this.st.K.pop()}async back(){this.pdb("back....");let t=this.popBs();console.log({backtp:t,K:this.st.K}),await this.goto(this.st.K.slice(-1)[0])}uicl(t){let e=document.getElementById(`i${this.id}_s${this.st.SCR}_${t}`);if(!e){console.log(`section ${t} not found!`),this.opErr({o:"uicl"},`section ${t} not found!`);return}e.innerHTML=""}didIt(t){return!!this.st.di[this.sha1(t)]}doIt(t,e){this.st.di[this.sha1(t)]=e}reset(){this.VM={},this.st=this.initSt(),this.elog=[],this.nIncr("resets")}async run(t="home"){this.p("\u{1F539} .run()"),this.reset(),await this.vmVFrFr();let e=this.FM.getFlow("once");await this.executeBlock(e.flowbin),this.nIncr("once"),await this.always(),this.setFlow(t),await this.exe(),this.nIncr("starts")}async always(){let t=this.FM.getFlow("always");await this.executeBlock(t.flowbin),this.st.ACTSEC=1,this.nIncr("always")}async restart(){this.reset(),await this.vmVFrFr(),this.rs=this.rs?this.rs+1:1,this.goto(2677007441),this.nIncr("restarts")}setFlow(t){let e=this.FM.FL[t];if(!e)return this.p(`flow ${t} not found`);console.log(e),this.st.CF.FL=t,this.st.CF.PC=e[1],this.st.CF.END=e[1]+e[2]}sl(t){return new Promise(e=>setTimeout(e,t))}p=t=>this.log(t);pdb=(t,e)=>{this.log(`debug: ${t}`),EE.render({xpe:this.id,sec:1,el:78,t1:t})};perr=t=>EE.render({xpe:this.id,sec:1,el:85,t1:t});stOpGet(t,e,s){return this.st.op[t]?e?s?this.st.op[t][e][s]:this.st.op[t][e]:this.st.op[t][s]:null}async ls(t){return await EE.EFS.main.ls(t)}async rm(t){return await EE.EFS.main.rm(t)}async rmAll(t){return await EE.EFS.main.rmAll()}stOpSet(t,e,s,i){return s?(this.st.op[t]||(this.st.op[t]={}),e?(this.st.op[t][e]||(this.st.op[t][e]={}),this.st.op[t][e][s]=i):this.st.op[t][s]=i,0):(this.st.op[t]=i,0)}stOpClr(t,e){!this.st[t]||(e?delete this.st[t][e]:delete this.st.op[t])}async prN(){let t=await this.HD.exe(84,{n:"xpeprofile",v:""});this.st.profile=t?JSON.parse(t):{v:{},sh:{}}}async prL(){let t=await this.HD.exe(83,{n:"xpeprofile"});this.st.profile=t?JSON.parse(t):{v:{},sh:{}}}async prS(){let t=await this.HD.exe(84,{n:"xpeprofile",v:JSON.stringify({})})}async prCl(){let t=await this.HD.exe(81,{n:"xpeprofile"})}vmSet(t,e){let s=this.getTy(e);this.VM[t]={v:e,t:s,wf:!1,ts:this.ts()}}vmSetType(t,e,s){let{b:i,e:o}=this.vmNameParse(t);o?(this.VM[i]||this.vmSetType(i,65,{}),this.VM[i].v[o]=s):(this.p("setting variable here...."),this.VM[t]={v:s,t:e,wf:!1,ts:this.ts()})}vmSetFrStr(t,e){let[s,i]=this.coerceValue(e);this.vmSetType(t,i,s)}vmGet(t){return this.VM[t]}vmFgt(t){delete this.VM[t]}vmClr(){this.VM={}}vmNameParse(t){let[e,s]=t.split(".");return{b:e,e:s}}vmSetWf(t){this.VM[t]||(this.VM[t]={v:null,t:0,ts:this.ts()}),this.VM[t].wf=!0}vmClearWf(t){this.VM[t]||(this.VM[t].wf=!1)}vmGetWf(){let t=Object.keys(this.VM),e=[];return t.forEach(s=>{this.VM[s].wf&&e.push(s)}),e}vmAssign(){if(this.st.vals.length===0)return;let[t="result",e="error",s="result2",i="result3"]=this.st.vars,o=[t,e,s,i];this.st.vals.forEach((n,r)=>{this.vmSetType(o[n],this.st.valty[n],r)})}vmBind(){if(this.st.var.length===0)return["result"];let t=[...this.st.var];return this.st.var=[],t}uid(t){for(var e="",s=t||11;s--;)e+=O[Math.random()*36|0];return e}vmParseVn(t){let e=this.CELLRE.exec(t);if(e)return{cell:e[0]};let s=xe.exec(t);if(this.log("vmParseVn",s),!s)return null;let[,i,,o]=s;if(!o)return{base:i};let n=parseInt(o);return isNaN(n)?{base:i,field:o}:{base:i,index:n}}rnd=(t=1e6)=>Math.floor(Math.random()*t);ts=()=>Math.floor(Date.now()/1e3);setE=t=>{delete this.VM.result,this.vmSetType("error",1,t)};setR=t=>{delete this.VM.error,this.vmSetType("result",1,t)};isType=(t,e)=>this.VM[t]?this.typeCheck(this.VM[t].t,e):!1;typeCheck=(t,e)=>((t|128)&e)===e;isT=t=>this.isType(t,144);isN=t=>this.isType(t,160);isB=t=>this.isType(t,176);isG=t=>this.isType(t,208);isI=t=>this.isType(t,192);async exeb64(t){let e=this.decb64(t);this.log({exeb64:1,bin:e}),await this.executeBlock(e)}decb64(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}};function Me(t){let e=document.createElement("link");e.rel="alternate stylesheet",e.type="text/css",e.title=t,e.href=`https://xpec.run/css/${t}.css`,document.getElementsByTagName("head")[0].appendChild(e)}function Se(t){return!!document.querySelector(`link[title="${t}"]`)}var D={scr:{},lnk:{},im:{},snd:{},fo:{},iScr:async function(t,e){try{if(this.scr[t])return 1;{let s=await import(e);return console.log({R:s}),this.scr[t]=!0,0}}catch(s){return console.log("error loading!"),console.log(s),-1}},aScr:function(t,e,s){try{if(this.scr[t])return s(),1;{let i=document.createElement("script");return i.id=`src-${t}`,i.src=e,i.async=!1,s&&i.addEventListener("load",s),document.getElementsByTagName("head")[0].appendChild(i),this.scr[t]=!0,0}}catch(i){return console.log("error attaching script"),console.log(i),-1}},aIcons:function(){this.aScr("iconify","https://code.iconify.design/iconify-icon/1.0.1/iconify-icon.min.js")},aTst:function(){console.log("\u{1F33A}TOASTIFY"),this.aLnk("toast","https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css")},aLnk:function(t,e,s={}){if(this.lnk[t])return 1;{let{rel:i="stylesheet",type:o,title:n,integrity:r,crossorigin:l}=s,h=document.createElement("link");return h.href=e,i&&(h.rel=i),o&&(h.type=o),n&&(h.title=n),t&&(h.id=`lnk-${t}`),r&&(h.integrity=r),l&&(h.crossOrigin=l),document.getElementsByTagName("head")[0].appendChild(h),this.lnk[t]=!0,0}},aCss:(t,e)=>{(void 0).lnk[t],hCss(t)?console.log(`\u{1F9E9} css ${t} exists`):lCss(t,e)},aFo:function(t){return this.aLnk(t,`https://fonts.bunny.net/css?family=${t}`)},aPiCss:t=>{hCss(t)?console.log(`csspi ${t} exists`):lCss(t,`https://xpec.run/css/${t}.css`)},swTh:t=>{Se(t)||Me(t);let e=document.getElementsByTagName("link");for(let s of e)s.rel.indexOf("stylesheet")!=-1&&s.title&&(s.disabled=!0,s.title==t&&(s.disabled=!1))}};function N(t){t.clear&&(console.log("clear!"),document.getElementById(t.clear).value=""),console.log({ev:t})}var j="0.6.4.1714";function P(t){for(var e=0;e<t.length;++e){var s=new Image;s.src=`https://sbs.xpes.net/${this.ap}/images/${t[e]}.jpg?sharpen=true`,s.id=`_img_${t[e]}`,this.im[`${this.ap}/${t[e]}`]=1}return t.length}function R(t){for(var e=0;e<t.length;++e){var s=new Audio;s.src=`https://xpec.run/sounds/${t[e]}.mp3`,s.id=`_img_${t[e]}`,this.sn[t[e]]=1}return t.length}function B(t={}){this.fn=EFN;let{id:e="xpe",target:s,dev:i=!1}=t,o=s?document.getElementById(s):document.body,n=document.createElement("div");n.setAttribute("id","ee"),o.appendChild(n);function r(h){this.E[h]=new window.EngageCore({id:h}),this.curCore=h;let c=document.createElement("div");c.setAttribute("id",`i${h}`),n.appendChild(c),console.log("ee init!"),console.log(this.E[h])}let l=i?"https://engagedev/engage/core/vm/dist/xpecore.esm.js":"https://xpec.run/dist/latest/xpecore.mjs";window.EngageCore?(r.bind(this)(e),console.log(`\u{1F7E3} vm (sync) ${this.E[e].version}`),console.log(`\u{1F7E3} ${EngageCore.version()}`)):import(l).then(({EngageCore:h})=>{window.EngageCore=h,r.bind(this)(e),console.log(`\u{1F7E3} vm (async) ${this.E[e].version}`)})}async function H(t="fluent",e="home"){let s=window[t];if(!EE.FLCC)throw"missing compiler";if(!s)throw"missing fluent source";EE.FLCC.initialize().then(async()=>{if(await EE.FLCC.parse(s)!==0)throw EE.FLCC.errors[0];await EE.E.xpe.loadFLC(EE.FLCC.flcbin),await EE.E.xpe.goto(e)})}function w(t,e,s,i){this.E[t].goto(i),console.log({elid:e,i:s}),Te(e,s,"tab-active")}function Te(t,e,s){console.log({parentElId:t,index:e,classTag:s});let i=document.getElementById(t);for(let o=0;o<i.children.length;o++){let n=i.children[o];console.log({child:n}),o===e?n.classList.add(s):n.classList.remove(s)}}function G(t,e){if(this.css[t.o])return;let s=document.createElement("style");s.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(s),this.css[t.o]=!0}var E={boot:async function(t,e="xpe"){try{this.init();let i=await(await fetch(t)).arrayBuffer(),o=new Uint8Array(i);await EE.E[e].boot(o)}catch(s){console.log(`EE boot failed: ${s.message}`)}},fluent:window.fluent,rec:G,reNav:w,version:j,fleval:H,ssg:(t="xpe")=>document.getElementById(t).innerHTML,input:N,id:()=>"i"+Math.floor(Math.random()*1e7),E:{},ED:{},SRC:{},BIN:{},plIm:P,plSn:R,anim:{},init:B,css:{},im:{},sn:{},fo:{},jsfn:{},EPI:{},PI:new Map,pim:D,head:document.head||document.getElementsByTagName("head")[0],style:function(t,{c:e,bc:s}){let i={color:e,backgroundColor:s};return Object.keys(i).forEach(o=>{i[o]===void 0&&delete i[o]}),`#${t} { ${this._sty2str(i)} }`},icny:function(t,e){let[s,i="mdi"]=t.split(".");return`<iconify-icon icon="${i}:${s}"></iconify-icon>`},inl:{},de:function(t,e,s,i,o){let n={},r=t.s||3,l=Number(r),h=l<e?e:l>s?s:l,c=i-3*o;return n.sz=c+h*o,n.fs=`font-size: ${n.sz}rem;`,n.sty="",t.c1&&(n.sty+=`color:${t.c1};`),t.bc&&(n.sty+=`background-color:${t.bc};`),t.oc&&(n.sty+=`border-color:${t.oc};`),t.f1&&(this.pim.aFo(t.s1),n.sty+=`font-family:${this.ff(t.f1)};`),t.cs&&(n.sty+=`${t.cs};`),n.cl="e"+t.o,t.cl&&(n.cl+=" "+n.cl),this.elanim&&(n.cl+=` ${this.elanim}`,this.elanim=null),n},sizer:function(t=3,e,s,i,o){let n=Number(t),r=n<e?e:n>s?s:n;return i-3*o+r*o},elFs:function(t=3,e,s,i,o){return`font-size:${this.sizer(t,e,s,i,o)}px;`},elIc:(t,e=36)=>{if(!t)return"";let[s,i="mdi"]=t.split(".");return`<iconify-icon width="${e}" icon="${i}:${s}"></iconify-icon>`},icfy:(t,e=36)=>t?`<iconify-icon width="${e}" icon="${t}"></iconify-icon>`:"",elIcn:t=>{let[e,s="mdi"]=t.split(".");return`${s}:${e}`},rifex:t=>t||"",elIm:t=>t.u1?`<img src="${t.u1}"/>`:"",elCo:t=>{let e="";return t.c1&&(e+=`color:${t.c1};`),t.bc&&(e+=`background-color:${t.bc};`),t.oc&&(e+=`border-color:${t.oc};`),e},elFo:function(t){return t.f1?(this.pim.aFo(t.f1),`font-family:${this.ff(t.f1)};`):""},ff(t){let[e,s]=t.split(":");return e.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")},elBgc:t=>t?`background-color:${t};`:"",elCl:(t,e="")=>t?` class="${e} ${t}" `:"",fetchWTO:async(t,e)=>{let{timeout:s=8e3}=e,i=new AbortController,o=setTimeout(()=>i.abort(),s),n=await fetch(t,{...e,signal:i.signal});return clearTimeout(o),n},_sty2str:t=>Object.keys(t).reduce((e,s)=>e+s.split(/(?=[A-Z])/).join("-").toLowerCase()+":"+t[s]+";",""),pr:t=>{let e=document.createElement("div");e.style.width="100%",e.style.textAlign="left",e.innerHTML=`<pre>${t}</pre>`,document.getElementById("xpe_1").appendChild(e)},setcss:(t,e)=>{let s=document.documentElement;console.log(`\u{1F344} setting --${t} to ${e}`),s.style.setProperty(`--${t}`,e)},getcss:t=>document.documentElement.style.getPropertyValue(`--${t}`),rnd(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)},crc32(t){for(var e,s=[],i=0;i<256;i++){e=i;for(var o=0;o<8;o++)e=1&e?3582100097^e>>>1:e>>>1;s[i]=e}for(var n=-1,r=0;r<t.length;r++)n=n>>>8^s[255&(n^t.charCodeAt(r))];return(-1^n)>>>0},b64tobin(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}};E.version=E.version+"/dev";window.EngageCore=_;window.EE=E;console.log("\u{1F7E0} ee-development "+E.version);})();
